<main class="container p-5 h-100">
	<div *ngIf="loading; else saleReady">
		<div class="d-flex h-100 justify-content-center align-items-center three-balls-loader">
			<div class="ball ball-1"></div>
			<div class="ball ball-2"></div>
			<div class="ball ball-3"></div>
		</div>
	</div>

	<ng-template #saleReady>
		<!--<a class="float-left" routerLink="/ventes">Retour aux ventes</a>-->
		<div class="text-center pb-3 mb-2">
			<h1 class="display-4">{{ sale.name }}</h1>
			<h5 *ngIf="sale.association" class="text-gray-dark">Organisé par {{ sale.association.name }}</h5>
		</div>

		<div class="row py-4 my-4">
			<div class="col-md-6 my-2">
				<p class="lead">Description</p>
				<p class="m-0">{{ sale.description }}</p>
			</div>
			<div class="col-md-3 my-2">
				<p class="lead">Dates</p>
				<p class="m-0">Ouverture&nbsp;: {{ sale.begin_at | date:'dd/MM/yyyy' }}</p>
				<p class="m-0">Fermeture&nbsp;: {{ sale.end_at | date:'dd/MM/yyyy' }}</p>
			</div>
			<div class="col-md-3 my-2">
				<p class="lead">Quantités</p>
				<p class="m-0">{{ sale.max_item_quantity }}</p>
			</div>
		</div>

		<!--<div class = "container">-->
			<!--<h1>Product Form</h1>-->
			<!--<form>-->
				<!--<div class = "form-group">-->
					<!--<label for = "productid">ID</label>-->
					<!--<input type = "text" class = "form-control" id = "productid" required-->
						   <!--[(ngModel)] = "model.productid" name = "id">-->
				<!--</div>-->

				<!--<div class = "form-group">-->
					<!--<label for = "name">Name</label>-->
					<!--<input type = "text" class = "form-control" id = "name"-->
						   <!--[(ngModel)] = "model.productname" name = "name">-->
				<!--</div>-->
			<!--</form>-->
		<!--</div>-->
		<div class = "container">
			<form (ngSubmit)="onSubmit()">
				<div *ngIf="sale.items; else noItem" class="row">
					<div class = "form-group">
						<div *ngFor="let item of sale.items">
							<div>{{item.name}}</div>
							<select class = "form-control" name = "nbPlaces">
								<ng-container *ngFor="let val of tab(item.max_per_user)">
									<option value='{{val}}'>{{val}}</option>
								</ng-container>
							</select>
						</div>
					</div>
				</div>
				<button type="submit" class="btn btn-primary" >Valider</button>
			</form>
			<ng-template #noItem>
				<p class="lead">Aucun item n'a été mis en vente pour le moment, revenez plus tard.</p>
			</ng-template>
		</div>

		<!--<pre class="pre-scrollable mt-5">{{ sale | json }}</pre>-->
	</ng-template>
</main>